  <!DOCTYPE html>
  <html>
  <head>
    <meta charset="utf-8" />
  </head>

  <body>
    <h1>WebSock Example Chatroom</h1>
    <ul>
      <li>By default, your messages will be sent to everyone online.</li>
      <li>To send a message to a specific user, use the format '@username your-message' where 
        username is replaced with their username.
      </li>
    </ul>
    <div id="output"></div>
    <textarea id="msg" rows="1" cols="50" onKeyPress="checkEnterPress(event, this)"></textarea>
    <br>
    <button id="sendbutton" type="button" onclick="sendMsg()">Send</button>
  </body>

  <script language="javascript" type="text/javascript">
  var wsUri = "ws://159.89.149.247:8467";
  var output;
  var sendButton;
  var msgBox;

  function init() {
    output = document.getElementById("output");
    sendButton = document.getElementById("sendbutton");
    msgBox = document.getElementById("msg");
    initWebSocket();
  }

  function initWebSocket() {
    websocket = new WebSocket(wsUri);
    websocket.onopen = function(evt) { onOpen(evt) };
    websocket.onclose = function(evt) { onClose(evt) };
    websocket.onmessage = function(evt) { onMessage(evt) };
    websocket.onerror = function(evt) { onError(evt) };
  }

  function onOpen(evt) {}

  function onClose(evt) {
    writeToScreen("Connection terminated... Please refresh if you wish to continue chatting.");
  }

  function onMessage(evt) {
    writeToScreen('<span style="color: blue;">[IN]: ' + evt.data + '</span>');
  }

  function onMessageOut(msg) {
    writeToScreen('<span style="color: green;">[OUT]: ' + msg + '</span>');
  }

  function onError(evt) {
    writeToScreen('<span style="color: red;">----- ERROR -----:</span> ' + evt.data);
  }

  function writeToScreen(message) {
    var pre = document.createElement("p");
    pre.style.wordWrap = "break-word";
    pre.innerHTML = message;
    output.appendChild(pre);
  }

  function msgServer(message) {
    websocket.send(message);
  }

  function sendMsg() {
    onMessageOut(msgBox.value);
    msgServer(msgBox.value);
    msgBox.value = '';
    return false;
  }

  function checkEnterPress(e, textarea) {
    var code = (e.keyCode ? e.keyCode : e.which);
    if(code == 13) {
      sendMsg();
    }
  }

  window.addEventListener("load", init, false);

  </script>
  </html>